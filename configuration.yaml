# Default core integrations and settings
default_config:


# theme settings for the frontend
frontend:
  # load custom themes from the themes directory
  themes: !include_dir_merge_named themes
  extra_module_url:
    - /local/card-mod.js


# lovelace:
#   mode: yaml
#   resources:
#     - url: /local/mushroom.js?v=1.0.0
#       type: module
#     - url: /local/mini-graph-card-bundle.js?v=0.13.0
#       type: module
#     - url: /local/button-card.js?v=3.4.0
#       type: module
#     - url: /local/apexcharts-card.js?v=2.1.2
#       type: module
#     - url: /local/layout-card.js?v=2.2.0
#       type: module
#     - url: /local/vertical-stack-in-card.js?v=1.0.1
#       type: module
#     - url: /local/ultra-vehicle-card.js?v=1.2.0
#       type: module
#     - url: /local/simple-weather-card-bundle.js?v=0.8.5
#       type: module
#     - url: /local/stack-in-card.js?v=0.1.3
#       type: module

#   dashboards:
#     home-dashboard:
#       mode: yaml
#       title: Home Dashboard
#       icon: mdi:home
#       show_in_sidebar: true
#       filename: dashboard/main.yaml


# Recorder integration settings for database logging and retention
recorder:
  # Database connection URL, fetched from the environment variable MYSQL_URL
  db_url: !secret db_url
  # Automatically purge old data to prevent the database from growing too large
  auto_purge: true
  # Keep a maximum of 180 days of data (approximately 6 months)
  purge_keep_days: 180
  # How often (in seconds) changes are committed to the database
  # Lower value means more frequent writes, which can increase IO load
  commit_interval: 5
  # Maximum number of times the recorder will retry connecting to the database on failure
  db_max_retries: 10
  # Seconds to wait between retry attempts
  db_retry_wait: 3
  # Entities and integrations to exclude from recording to keep the database smaller
  exclude:
    # Exclude entire integrations, e.g., updater and zwave_js
    domains: []
    # Exclude specific sensors you donâ€™t want to store
    entities: []

# General Home Assistant core configuration
homeassistant:
  # Name of your Home Assistant instance
  name: Home
  # Latitude of your location, stored securely in secrets.yaml
  latitude: !secret latitude
  # Longitude of your location, stored securely in secrets.yaml
  longitude: !secret longitude
  # Use metric units (Celsius, meters, etc.)
  unit_system: metric
  # Currency used for integrations that require it
  currency: EUR
  # Time zone for your location
  time_zone: Europe/Amsterdam
  # External URL for remote access, stored securely in secrets.yaml
  external_url: !secret external_url

# HTTP server settings for trusted proxies and security
http:
  # Use the X-Forwarded-For header (important if behind reverse proxy)
  use_x_forwarded_for: true
  # List of trusted proxy IP ranges
  trusted_proxies:
    - 10.0.0.0/8
    - 127.0.0.1
    - ::1
  # Enable IP banning after too many failed login attempts
  ip_ban_enabled: true
  # Number of allowed failed login attempts before banning
  login_attempts_threshold: 5

# Include your automation, script, scene, and template files from directories
automation: !include_dir_merge_list automations/
script: !include_dir_merge_named scripts/
scene: !include_dir_merge_list scenes/
template: !include_dir_merge_list templates/
input_select: !include input_select.yaml
input_boolean: !include input_booleans.yaml
light: !include light_groups.yaml
sensor: !include sensors.yaml
group: !include groups.yaml

shell_command:
  run_gitbackup: bash scripts/backup2git.sh